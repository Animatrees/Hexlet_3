# Сервис рекомендаций

Этот сервис анализирует историю покупок пользователей и рекомендует товары на основе их предпочтений и покупательского поведения клиентов со схожими интересами.

## Основные возможности
1. **Рекомендации сопутствующих товаров**:   
   Сервис анализирует, какие товары чаще всего покупают вместе, и предлагает пользователю товары, которых нет в его истории покупок, но которые популярны среди других клиентов.
2. **Популярность товаров**:   
   Если рекомендации содержат несколько товаров, выбирается самый популярный из них.
3. **Асинхронность**:   
   Генерация рекомендаций реализована асинхронно для высокой производительности.

## API Эндпоинты
### 1. Добавление покупок пользователя
**Метод**: `POST /purchases`  
**Описание**: Сохраняет информацию о новых покупках пользователя.  

**Пример запроса**:
```json
{
  "user_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "products": [
    "3fa85f64-5717-4562-b3fc-2c963f66afa6"
  ]
}
```

**Пример ответа**:
```json
{
  "status": "purchases_added"
}
```

### 2. Генерация рекомендаций
**Метод**: `POST recommendations/generate`  
**Описание**: Запускает процесс асинхронной генерации рекомендаций для пользователя.  

**Пример запроса**:
```json
{
  "user_id": "user123"
}
```

**Пример ответа**:
```json
{
  "status": "recommendations_generation_started"
}
```

### 3. Получение рекомендаций
**Метод**: `GET /recommendations`  
**Описание**: Возвращает список персонализированных рекомендаций для пользователя.  

**Пример запроса**:
```
GET /recommendations?user_id=user123
```

**Пример ответа**:
```json
{
  "user_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "product": "3fa85f64-5717-4562-b3fc-2c963f66afa6"
}
```


## **Технологии**:
   - `FastAPI` для реализации API.
   - `PostgreSQL` для хранения данных.
   - `SQLAlchemy` для работы с базой данных.
   - `asyncio` для асинхронной обработки.
   - `pandas` для генерации рекомендаций.


## Запуск проекта
### Предварительные требования
- Python 3.12+
- Poetry
- PostgreSQL  

### Инструкции по запуску
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/Animatrees/Hexlet_3.git
   ```
2. Перейдите в директорию проекта:
   ```bash
   cd Hexlet_3
   ```
3. Настройте переменные окружения в файле `.env` (пример файла предоставлен в проекте).
4. Установите зависимости `poetry install`.
5. Примените миграции (для удобства добавлена команда `make migrate`)
6. Запустите проект из `main.py`.
7. API будет доступно по адресу `http://localhost:8000`.

## Лицензия
Этот проект распространяется под лицензией MIT. Подробности см. в файле LICENSE.
